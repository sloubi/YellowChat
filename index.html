<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>YellowChat</title>
        <style>
            #sendform {
                position: absolute;
                bottom: 20px;
            }
            #main {
                position: relative;
                border: 1px solid #eee;
                height: 300px;
                overflow-y: auto;
                padding: 12px;
            }
        </style>
    </head>
    <body>
        <h1>YellowChat</h1>

        <div id="main">
            <div id="chat"></div>
            <form method="post" action="" id="sendform">
                <input type="text" name="message" id="message" autofocus autocomplete="false">
                <button id="send">Send</button>
            </form>
        </div>

        <script src="http://code.jquery.com/jquery-3.3.1.min.js"></script>
        <script src="/socket.io/socket.io.js"></script>
        <script>
            var socket = io.connect('http://localhost:3000');
            socket.on('new_user', function (message) {
                $('#chat').append('<em>' + message + ' a rejoint le chat.</em><br>');
            });

            socket.on('user_msg', function (data) {
                $('#chat').append('<b>' + data.pseudo + '</b> : ' + data.msg + '<br>');
            });

            var pseudo = prompt('Quel est votre pseudo ?');
            socket.emit('new_user', pseudo);

            $('#sendform').submit(function (e) {
                e.preventDefault();

                socket.emit('new_msg', $('#message').val());
                $('#chat').append('<b>' + pseudo + '</b> : ' + $('#message').val() + '<br>');
                $('#message').val('').focus();
            });
        </script>
    </body>
</html>